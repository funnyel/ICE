<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>monitor.graphmonitor</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="monitor.graphmonitor">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-monitor.graphmonitor"><a href="htmlsrc/monitor.graphmonitor.html" class="symbol">monitor.graphmonitor</a></h1>

<dl>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="GraphMonitor" href="htmlsrc/monitor.graphmonitor.html#L69">GraphMonitor</a> : <span class="bclass">SubMonitor</span> <span class="attrs">[<span class="stc">abstract</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Base class for system monitor style graph monitoring widgets.</div></div>
<div class="cmnt">User can zoom and scroll the graph with mouse, change data point time, 
 set average or sum mode and toggle display of monitored values.
<p class="bl"></p>
 Functions generate_graph_monitor_ctor() and generate_graph_fetch_statistics()
 automatically generate much of code routinely needed by GraphMonitor implementations.
 However, they require certain conditions to be met, see their documentation below,
 and a bare example implementation here:</div>
<p class="sec_header">Example:</p><div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
<a href="#L3_ex1" name="L3_ex1">3</a>
<a href="#L4_ex1" name="L4_ex1">4</a>
<a href="#L5_ex1" name="L5_ex1">5</a>
<a href="#L6_ex1" name="L6_ex1">6</a>
<a href="#L7_ex1" name="L7_ex1">7</a>
<a href="#L8_ex1" name="L8_ex1">8</a>
<a href="#L9_ex1" name="L9_ex1">9</a>
<a href="#L10_ex1" name="L10_ex1">10</a>
<a href="#L11_ex1" name="L11_ex1">11</a>
<a href="#L12_ex1" name="L12_ex1">12</a>
<a href="#L13_ex1" name="L13_ex1">13</a>
<a href="#L14_ex1" name="L14_ex1">14</a>
<a href="#L15_ex1" name="L15_ex1">15</a>
<a href="#L16_ex1" name="L16_ex1">16</a>
<a href="#L17_ex1" name="L17_ex1">17</a>
<a href="#L18_ex1" name="L18_ex1">18</a>
<a href="#L19_ex1" name="L19_ex1">19</a>
<a href="#L20_ex1" name="L20_ex1">20</a>
<a href="#L21_ex1" name="L21_ex1">21</a>
<a href="#L22_ex1" name="L22_ex1">22</a>
<a href="#L23_ex1" name="L23_ex1">23</a>
<a href="#L24_ex1" name="L24_ex1">24</a>
<a href="#L25_ex1" name="L25_ex1">25</a>
<a href="#L26_ex1" name="L26_ex1">26</a>
<a href="#L27_ex1" name="L27_ex1">27</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">class</span> <span class="i">ExampleMonitored</span>
{
    <span class="k">mixin</span> <span class="i">Signal</span>!(<span class="i">Statistics</span>) <span class="i">send_statistics</span>;

    <span class="k">void</span> <span class="i">update</span>()
    {
        <span class="i">send_statistics</span>.<span class="i">emit</span>(<span class="i">Statistics</span>(<span class="n">1</span>, <span class="n">2.5</span>));
    }
}

<span class="k">struct</span> <span class="i">Statistics</span>
{
    <span class="k">uint</span> <span class="i">a</span>;
    <span class="k">real</span> <span class="i">b</span>;
}

<span class="k">class</span> <span class="i">ExampleMonitor</span> : <span class="i">GraphMonitor</span>
{ 
    <span class="k">public</span>:
        <span class="k">this</span>(<span class="i">ExampleMonitored</span> <span class="i">monitored</span>)
        {
            <span class="k">mixin</span>(<span class="i">generate_graph_monitor_ctor</span>(<span class="sl">"a"</span>, <span class="sl">"b"</span>));
        }

    <span class="k">private</span>:
        <span class="k">mixin</span>(<span class="i">generate_graph_fetch_statistics</span>(<span class="sl">"a"</span>, <span class="sl">"b"</span>));
}              </pre>
</td></tr>
</table></div>
<dl>
<dt class="decl"><a class="symbol _invariant" name="GraphMonitor.invariant" href="htmlsrc/monitor.graphmonitor.html#L71">invariant</a> <a href="monitor.graphmonitor.html#GraphMonitor.invariant" class="plink">¶</a></dt>
<dd class="ddef"><div class="nocmnt"></div></dd>
<dt class="decl">GraphData <a class="symbol _variable" name="GraphMonitor.data_" href="htmlsrc/monitor.graphmonitor.html#L75">data_</a> <span class="attrs">[<span class="prot">protected</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor.data_" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Measured graph data.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="GraphMonitor.die" href="htmlsrc/monitor.graphmonitor.html#L108">die</a><span class="params">()</span> <span class="attrs">[<span class="stc">override</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor.die" class="plink">¶</a></dt>
<dd class="ddef"><div class="nocmnt"></div></dd>
<dt class="decl"><a class="symbol _ctor" name="GraphMonitor.this" href="htmlsrc/monitor.graphmonitor.html#L125">this</a><span class="params">(GUILineGraphFactory <em>factory</em>, GraphData <em>graph_data</em>)</span> <span class="attrs">[<span class="prot">protected</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor.this" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Construct a GraphMonitor working on specified graph data.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>factory</em></td><td>Factory used to produce the graph widget.
                       Derived class is responsible with adding values'
                       graphs to the factory.</td></tr>
<tr><td><em>graph_data</em></td><td>Graph data to link the graph widget to.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="GraphMonitor.update_value" href="htmlsrc/monitor.graphmonitor.html#L160">update_value</a><span class="params">(string <em>name</em>, real <em>value</em>)</span> <span class="attrs">[<span class="stc">final</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor.update_value" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Add a new measurement of value with specified name.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>name</em></td><td>Name of the value.</td></tr>
<tr><td><em>value</em></td><td>Measurement to add.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="GraphMonitor.mode" href="htmlsrc/monitor.graphmonitor.html#L163">mode</a><span class="params">(GraphMode <em>graph_mode</em>)</span> <span class="attrs">[<span class="stc">final</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor.mode" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set graph mode.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="GraphMonitor.add_toggle" href="htmlsrc/monitor.graphmonitor.html#L171">add_toggle</a><span class="params">(string <em>name</em>, Color <em>color</em>)</span> <span class="attrs">[<span class="prot">protected</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor.add_toggle" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Add a display toggling button for a value.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>name</em></td><td>Name of the value toggled by the button.</td></tr>
<tr><td><em>color</em></td><td>Color of the button text.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="GraphMonitor.update" href="htmlsrc/monitor.graphmonitor.html#L193">update</a><span class="params">()</span> <span class="attrs">[<span class="stc">override</span>]</span> <a href="monitor.graphmonitor.html#GraphMonitor.update" class="plink">¶</a></dt>
<dd class="ddef"><div class="nocmnt"></div></dd></dl></dd>
<dt class="decl"><span class="rettyp">string</span> <a class="symbol _function" name="generate_graph_monitor_ctor" href="htmlsrc/monitor.graphmonitor.html#L274">generate_graph_monitor_ctor</a><span class="params">(string[] <em>values</em>...)</span> <a href="monitor.graphmonitor.html#generate_graph_monitor_ctor" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Generate constructor code for a graph monitor implementation.</div></div>
<div class="cmnt">Initializes graph monitor with specified monitored values, automatically sets 
 their colors and connects to signal to fetch statistics from the monitored object. 
 This code should be inserted to a graph monitor implementation constructor
 with a string mixin.</div>
<p class="sec_header">Note:</p><div class="cmnt">The constructor must have access to the monitored object through a variable
 called "monitored", the monitored object must have a "send_statistics" signal that 
 passes an object called "Statistics" to a method called "fetch_statistics" in the 
 implementation, generated by the generate_graph_fetch_statistics function.</div>
<p class="sec_header">Note:</p><div class="cmnt">To use this as a mixin, you have to import color, util.signal, gui.guilinegraph .</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>values</em></td><td>Names of values monitored by the graph monitor. Graph colors will 
                  be assigned from an internal palette, limiting number of values 
                  (at most 16 right now). Parameters passed must be the ones passed 
                  to corresponding generate_graph_fetch_statistics call.</td></tr></table>
<p class="sec_header">Returns:</p><div class="cmnt">Code to be inserted into a graph monitor constructor.</div></dd>
<dt class="decl"><a class="symbol _unittest" name="unittest" href="htmlsrc/monitor.graphmonitor.html#L298">unittest</a> <a href="monitor.graphmonitor.html#unittest" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Unittest for generate_graph_monitor_ctor() .</div></div></dd>
<dt class="decl"><span class="rettyp">string</span> <a class="symbol _function" name="generate_graph_fetch_statistics" href="htmlsrc/monitor.graphmonitor.html#L323">generate_graph_fetch_statistics</a><span class="params">(string[] <em>values</em>...)</span> <a href="monitor.graphmonitor.html#generate_graph_fetch_statistics" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Generate a statistics fetching method for a graph monitor implementation. Passes 
 data members of a Statistics object to values with corresponding names in graph data
 This code should be inserted to the implementation as a method with a string mixin.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>values</em></td><td>Names of values monitored by the graph monitor using the generated
                  code. Must correspond with data members of the Statistics object.</td></tr></table>
<p class="sec_header">Returns:</p><div class="cmnt">Generated code, ready to be inserted into a graph monitor implementation.</div></dd>
<dt class="decl"><a class="symbol _unittest" name="unittest:2" href="htmlsrc/monitor.graphmonitor.html#L337">unittest</a> <a href="monitor.graphmonitor.html#unittest:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Unittest for generate_graph_fetch_statistics() .</div></div></dd>
<dt class="decl">string[] <a class="symbol _variable" name="palette" href="htmlsrc/monitor.graphmonitor.html#L352">palette</a> <span class="attrs">[<span class="stc">const</span>]</span> <a href="monitor.graphmonitor.html#palette" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Palette of colors used by generated graph monitor code.</div></div></dd></dl>
</div>
<div id="kandil-footer">
  <p></p>
  <p>Page generated by <a href="http://code.google.com/p/dil">dil</a> on Sat Feb 19 00:03:30 2011. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">kandil</a>.</p>
</div>
</div>
</body>
</html>