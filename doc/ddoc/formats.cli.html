<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>formats.cli</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="formats.cli">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-formats.cli"><a href="htmlsrc/formats.cli.html" class="symbol">formats.cli</a></h1>

<dl>
<dt class="decl"><span class="kw">struct</span> <a class="symbol _struct" name="CLIOption" href="htmlsrc/formats.cli.html#L30">CLIOption</a> <a href="formats.cli.html#CLIOption" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Command line option.</div></div>
<div class="cmnt">Methods of this struct are used to specify parameters of the option.
 The option is then added to a CLI using its add_option() method.</div>
<dl>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.opCall" href="htmlsrc/formats.cli.html#L53">opCall</a><span class="params">(string <em>name</em>)</span> <span class="attrs">[<span class="stc">static</span>]</span> <a href="formats.cli.html#CLIOption.opCall" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Construct a CLIOption with specified name.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>name</em></td><td>Long name of the option. (Will automatically be prefixed with "--" .)
                 Must not be parsable as a number.</td></tr></table>
<p class="sec_header">Returns:</p><div class="cmnt">Constructed option.</div></dd>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.short_name" href="htmlsrc/formats.cli.html#L70">short_name</a><span class="params">(char <em>name</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLIOption.short_name" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set short name of the option. (Will be prefixed by "-" .)</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>name</em></td><td>Short name (one character). Must be from the alphabet.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.help" href="htmlsrc/formats.cli.html#L75">help</a><span class="params">(string <em>help</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLIOption.help" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set help string of the option.</div></div></dd>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.target" href="htmlsrc/formats.cli.html#L86">target</a><span class="tparams">(<em>T</em>)</span><span class="params">(T* <em>target</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLIOption.target" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set value target.                       
 
 Parse single argument of the option as target type and write it to the target.
 
 Target must be specified (by any of the target() methods).</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>target</em></td><td>Target variable to write option argument to.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.target:2" href="htmlsrc/formats.cli.html#L104">target</a><span class="tparams">(<em>T</em>)</span><span class="params">(void delegate(T) <em>target</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLIOption.target:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set setter target.                       
 
 Parse single argument of the option as target type and pass it to specified setter.
 
 Target must be specified (by any of the target() methods).</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>target</em></td><td>Target setter to pass option argument to.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.target:3" href="htmlsrc/formats.cli.html#L122">target</a><span class="tparams">(<em>T</em>)</span><span class="params">(<span class="k">ref</span> T[] <em>target</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLIOption.target:3" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set array target.                       
 
 Parse arguments of the option as target type and write them to specified array.
 If the option is specified more than once, arguments from all instances
 of the option are written to the array.
 
 Target must be specified (by any of the target() methods).</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>target</em></td><td>Target array to write option arguments to.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.target:4" href="htmlsrc/formats.cli.html#L139">target</a><span class="tparams">(<em>T</em> : <span class="spec">void delegate(string[])</span>)</span><span class="params">(T <em>target</em>, int <em>arg_count</em> = <span class="defval">-<span class="n">1</span></span>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLIOption.target:4" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set function target.                       
 
 Pass arguments of the option to specified function without any parsing.
 Optionally, required number of arguments can be specified.
 
 Target must be specified (by any of the target() methods).</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>target</em></td><td>Target function to pass option arguments to.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">CLIOption</span> <a class="symbol _function" name="CLIOption.default_args" href="htmlsrc/formats.cli.html#L158">default_args</a><span class="params">(string[] <em>args</em>...)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLIOption.default_args" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Specify default arguments for this option.</div></div>
<div class="cmnt">Option's action will be executed with specified arguments
 if the option is not present.
 If default arguments are not specified, and the option is not present,
 option's action will not be executed.</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>args</em></td><td>Default arguments for the option.</td></tr></table>
<p class="sec_header">Returns:</p><div class="cmnt">Resulting CLIOption.</div></dd></dl></dd>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="CLI" href="htmlsrc/formats.cli.html#L240">CLI</a> <a href="formats.cli.html#CLI" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Command line parser.</div></div>
<div class="cmnt">Options are specified using the Option struct and added using the add_option() method.
                 
 Each option has a long, GNU-style name automatically prefixed by "--" and
 optionally a short, one character name automatically prefixed by "-".
 Long option names can be abbreviated as long as the abbreviation uniquely
 identifies an option.
<p class="bl"></p>
 Short options can be chained; Option arguments can be separated from options by spaces
 or '='; Array options accept comma separated arguments; Boolean flags can have
 optional argument, e.g. "-f0" will set flag -f to false.
<p class="bl"></p>
 A help option (-h, --help) is automatically generated from help info specified
 for each option.</div>
<p class="sec_header">Examples:</p><div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
<a href="#L3_ex1" name="L3_ex1">3</a>
<a href="#L4_ex1" name="L4_ex1">4</a>
<a href="#L5_ex1" name="L5_ex1">5</a>
<a href="#L6_ex1" name="L6_ex1">6</a>
<a href="#L7_ex1" name="L7_ex1">7</a>
<a href="#L8_ex1" name="L8_ex1">8</a>
<a href="#L9_ex1" name="L9_ex1">9</a>
<a href="#L10_ex1" name="L10_ex1">10</a>
<a href="#L11_ex1" name="L11_ex1">11</a>
<a href="#L12_ex1" name="L12_ex1">12</a>
<a href="#L13_ex1" name="L13_ex1">13</a>
<a href="#L14_ex1" name="L14_ex1">14</a>
<a href="#L15_ex1" name="L15_ex1">15</a>
<a href="#L16_ex1" name="L16_ex1">16</a>
<a href="#L17_ex1" name="L17_ex1">17</a>
<a href="#L18_ex1" name="L18_ex1">18</a>
<a href="#L19_ex1" name="L19_ex1">19</a>
<a href="#L20_ex1" name="L20_ex1">20</a>
<a href="#L21_ex1" name="L21_ex1">21</a>
<a href="#L22_ex1" name="L22_ex1">22</a>
<a href="#L23_ex1" name="L23_ex1">23</a>
<a href="#L24_ex1" name="L24_ex1">24</a>
<a href="#L25_ex1" name="L25_ex1">25</a>
<a href="#L26_ex1" name="L26_ex1">26</a>
<a href="#L27_ex1" name="L27_ex1">27</a>
<a href="#L28_ex1" name="L28_ex1">28</a>
<a href="#L29_ex1" name="L29_ex1">29</a>
<a href="#L30_ex1" name="L30_ex1">30</a>
<a href="#L31_ex1" name="L31_ex1">31</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">void</span> <span class="i">main</span>(<span class="i">string</span>[] <span class="i">args</span>)
{
    <span class="i">CLI</span> <span class="i">cli</span> = <span class="k">new</span> <span class="i">CLI</span>();
    <span class="i">cli</span>.<span class="i">description</span> = <span class="sl">"Example 1.0<span class="es">\n</span> Written in D by E. Xample"</span>;
    <span class="i">cli</span>.<span class="i">epilog</span> = <span class="sl">"Find more info at www.example.com"</span>;

    <span class="k">bool</span> <span class="i">flag</span>;
    <span class="k">int</span> <span class="i">val</span>;
    <span class="k">int</span> <span class="i">setter_val</span>;
    <span class="k">void</span> <span class="i">setter</span>(<span class="k">int</span> <span class="i">i</span>){<span class="i">setter_val</span> = <span class="i">i</span>;}
    <span class="k">int</span>[] <span class="i">array</span>;

    <span class="lc">//bool flag</span>
    <span class="i">cli</span>.<span class="i">add_option</span>(<span class="i">CLIOption</span>(<span class="sl">"flag"</span>).<span class="i">target</span>(&amp;<span class="i">flag</span>).<span class="i">short_name</span>(<span class="cl">'f'</span>));
    <span class="lc">//value, with defaults</span>
    <span class="i">cli</span>.<span class="i">add_option</span>(<span class="i">CLIOption</span>(<span class="sl">"value"</span>).<span class="i">target</span>(&amp;<span class="i">flag</span>).<span class="i">short_name</span>(<span class="cl">'v'</span>).<span class="i">default_args</span>(<span class="sl">"1"</span>));
    <span class="lc">//setter</span>
    <span class="i">cli</span>.<span class="i">add_option</span>(<span class="i">CLIOption</span>(<span class="sl">"setter"</span>).<span class="i">target</span>(&amp;<span class="i">setter</span>).<span class="i">short_name</span>(<span class="cl">'s'</span>);
    <span class="lc">//array</span>
    <span class="i">cli</span>.<span class="i">add_option</span>(<span class="i">CLIOption</span>(<span class="sl">"array"</span>).<span class="i">target</span>(<span class="i">array</span>).<span class="i">short_name</span>(<span class="cl">'a'</span>);
    <span class="lc">//custom function</span>
    <span class="i">cli</span>.<span class="i">add_option</span>(<span class="i">CLIOption</span>(<span class="sl">"custom"</span>)
                       .<span class="i">target</span>((<span class="i">string</span>[] <span class="i">args</span>){<span class="k">foreach</span>(<span class="i">arg</span>; <span class="i">args</span>){<span class="i">writefln</span>(<span class="i">arg</span>);}})
                       .<span class="i">short_name</span>(<span class="cl">'c'</span>);

    <span class="lc">//parse arguments</span>
    <span class="k">if</span>(!<span class="i">cli</span>.<span class="i">parse</span>(<span class="i">args</span>)){<span class="k">return</span>;}

    ...

}</pre>
</td></tr>
</table></div>
<dl>
<dt class="decl"><a class="symbol _ctor" name="CLI.this" href="htmlsrc/formats.cli.html#L280">this</a><span class="params">()</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLI.this" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Construct a CLI.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="CLI.description" href="htmlsrc/formats.cli.html#L287">description</a><span class="params">(string <em>text</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLI.description" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set program description (start of the help text).</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="CLI.epilog" href="htmlsrc/formats.cli.html#L290">epilog</a><span class="params">(string <em>text</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLI.epilog" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set epilog of the help text.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="CLI.add_option" href="htmlsrc/formats.cli.html#L299">add_option</a><span class="params">(CLIOption <em>option</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLI.add_option" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Add a command line option.</div></div>
<div class="cmnt">Every option must have an unique long (and short, if any) name.</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>option</em></td><td>Option to add.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">bool</span> <a class="symbol _function" name="CLI.parse" href="htmlsrc/formats.cli.html#L327">parse</a><span class="params">(string[] <em>args</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="formats.cli.html#CLI.parse" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Parse command line arguments.</div></div>
<div class="cmnt">Command line options' targets are written to/executed as the options are parsed.
 If an error occurs, parsing is aborted and false is returned.</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>args</em></td><td>Command line arguments to parse. Must be at least one (program name).</td></tr></table>
<p class="sec_header">Returns:</p><div class="cmnt">False in case of error or if help was requested. False otherwise.</div></dd></dl></dd>
<dt class="decl"><a class="symbol _unittest" name="unittest" href="htmlsrc/formats.cli.html#L519">unittest</a> <a href="formats.cli.html#unittest" class="plink">¶</a></dt>
<dd class="ddef"><div class="nocmnt"></div></dd></dl>
</div>
<div id="kandil-footer">
  <p></p>
  <p>Page generated by <a href="http://code.google.com/p/dil">dil</a> on Fri Apr 22 23:31:46 2011. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">kandil</a>.</p>
</div>
</div>
</body>
</html>