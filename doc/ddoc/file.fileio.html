<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>file.fileio</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="file.fileio">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-file.fileio"><a href="htmlsrc/file.fileio.html" class="symbol">file.fileio</a></h1>

<dl>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="add_mod_directory" href="htmlsrc/file.fileio.html#L33">add_mod_directory</a><span class="params">(string <em>directory</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="file.fileio.html#add_mod_directory" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Add a mod directory (subdirectory of ./data/) to read data from.</div></div>
<div class="cmnt">Directories added later take precedence over directories
 added before, e.g., if we add 3 directories, "main", "mod1" and "mod2",
 file "file.txt" will be first searched for as "./data/mod2/file.txt",
 then "./data/mod1/file.txt" and finally "./data/main/file.txt"
<p class="bl"></p>
 Only lowercase letters, numbers and the '_' character are legal in mod directory names.</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>directory</em></td><td>Mod directory to add.</td></tr></table>
<p class="sec_header">Throws:</p><div class="cmnt">Exception on if the directory name is invalid or the directory does not exist.</div></dd>
<dt class="decl"><span class="rettyp">File</span> <a class="symbol _function" name="open_file" href="htmlsrc/file.fileio.html#L91">open_file</a><span class="params">(string <em>name</em>, FileMode <em>mode</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="file.fileio.html#open_file" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Open a file with given name and mode.</div></div>
<div class="cmnt">Files are searched for in known ./data/ subdirectories, e.g. if "main" and "mod"
 are known subdirectories, file "file.txt" is first searched for in "./data/mod"
 and the "./data/main". Alternatively, subdirectory can be specified explicitly,
 e.g. "mod::file.txt" will always open "./data/mod/file.txt" .
 Reading a file that doesn't exist is an error.
 For writing and appending, mod directory must be explicitly set.
 (e.g. mod::file.txt).</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>name</em></td><td>In-engine name of the file to open.</td></tr>
<tr><td><em>mode</em></td><td>File mode to open the file in.</td></tr></table>
<p class="sec_header">Returns:</p><div class="cmnt">File opened.</div>
<p class="sec_header">Throws:</p><div class="cmnt">Exception on failure.</div>
<p class="sec_header">Examples:</p><div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
<a href="#L3_ex1" name="L3_ex1">3</a>
<a href="#L4_ex1" name="L4_ex1">4</a>
</pre></td><td class="d_codetext"><pre>
<span class="lc">//Read fonts/Font42.ttf from any mod directory (depending on font directories' order).</span>
<span class="i">File</span> <span class="i">file</span> = <span class="i">open_file</span>(<span class="sl">"fonts/Font42.ttf"</span>, <span class="i">FileMode</span>.<span class="i">Read</span>); 
<span class="lc">//don't forget to close the file</span>
<span class="k">scope</span>(<span class="i">exit</span>){<span class="i">close_file</span>(<span class="i">file</span>);}</pre>
</td></tr>
</table>
<p class="bl"></p>
 <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex2" name="L1_ex2">1</a>
<a href="#L2_ex2" name="L2_ex2">2</a>
<a href="#L3_ex2" name="L3_ex2">3</a>
<a href="#L4_ex2" name="L4_ex2">4</a>
</pre></td><td class="d_codetext"><pre>
<span class="lc">//Read fonts/Font42.ttf from "main" directory.</span>
<span class="i">File</span> <span class="i">file</span> = <span class="i">open_file</span>(<span class="sl">"main::fonts/Font42.ttf"</span>, <span class="i">FileMode</span>.<span class="i">Read</span>); 
<span class="lc">//don't forget to close the file</span>
<span class="k">scope</span>(<span class="i">exit</span>){<span class="i">close_file</span>(<span class="i">file</span>);}</pre>
</td></tr>
</table>
<p class="bl"></p>
 <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex3" name="L1_ex3">1</a>
<a href="#L2_ex3" name="L2_ex3">2</a>
<a href="#L3_ex3" name="L3_ex3">3</a>
<a href="#L4_ex3" name="L4_ex3">4</a>
</pre></td><td class="d_codetext"><pre>
<span class="lc">//ERROR: must specify mod directory for writing.</span>
<span class="i">File</span> <span class="i">file</span> = <span class="i">open_file</span>(<span class="sl">"fonts/Font42.ttf, FileMode.Write"</span>); 
<span class="lc">//don't forget to close the file</span>
<span class="k">scope</span>(<span class="i">exit</span>){<span class="i">close_file</span>(<span class="i">file</span>);}</pre>
</td></tr>
</table>
<p class="bl"></p>
 <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex4" name="L1_ex4">1</a>
<a href="#L2_ex4" name="L2_ex4">2</a>
<a href="#L3_ex4" name="L3_ex4">3</a>
<a href="#L4_ex4" name="L4_ex4">4</a>
</pre></td><td class="d_codetext"><pre>
<span class="lc">//Open fonts/Font42.ttf from the "main" directory for writing.</span>
<span class="i">File</span> <span class="i">file</span> = <span class="i">open_file</span>(<span class="sl">"main::fonts/Font42.ttf, FileMode.Write"</span>); 
<span class="lc">//don't forget to close the file</span>
<span class="k">scope</span>(<span class="i">exit</span>){<span class="i">close_file</span>(<span class="i">file</span>);}</pre>
</td></tr>
</table></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="close_file" href="htmlsrc/file.fileio.html#L125">close_file</a><span class="params">(File <em>file</em>)</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="file.fileio.html#close_file" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Close a file. This will write out any changes and delete any buffers.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>file</em></td><td>File to close.</td></tr></table>
<p class="sec_header">Throws:</p><div class="cmnt">Exception if the buffers couldn't be written out in append or write mode.</div></dd>
<dt class="decl"><span class="kw">auto</span> <a class="symbol _variable" name="write_reserve_" href="htmlsrc/file.fileio.html#L164">write_reserve_</a> <span class="attrs">[<span class="stc">const</span>]</span> <a href="file.fileio.html#write_reserve_" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Default amount of bytes to reserve for file writing buffers - to prevent
frequent reallocations.</div></div></dd></dl>
</div>
<div id="kandil-footer">
  <p></p>
  <p>Page generated by <a href="http://code.google.com/p/dil">dil</a> on Wed Feb 23 16:36:33 2011. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">kandil</a>.</p>
</div>
</div>
</body>
</html>